"use strict";!function(){console.log("all systems go");var e={vue:null,settings:{displayMode:"aligned",apiRoot:"http://localhost:5000/"},loadContents:function(){helper.loadJson("/static/data/contacts.json",function(t){console.log("contacts are:",t),e.vue.contacts=t,console.log(e.vue.contacts),console.log("---------"),console.log("filtered:",e.vue.filteredContacts)})},updateJsonFile:function(){var t=new XMLHttpRequest;t.open("POST","/save-json",!0),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(JSON.stringify(e.vue.contacts)),t.onloadend=function(){if(200===t.status){var e=t.responseText,n=JSON.parse(e);n.successful&&n.successful===!0?alert("JSON file update successfully!"):(console.error(n),alert("There was a problem updating the json file. Check the console for details."))}}},resetJsonFile:function(){var e=new XMLHttpRequest;e.overrideMimeType("application/json"),e.open("GET","/reset-json",!0),e.onreadystatechange=function(){if(4===e.readyState&&"200"==e.status){var t=e.responseText,n=JSON.parse(t);n.successful&&n.successful===!0?(alert("JSON file reset!"),window.location.reload()):(console.error(n),alert("There was a problem resetting the json file. Check the console for details."))}},e.send(null)},processContact:function(){var t=e.vue.newContact,n=e.vue.contacts[e.vue.contacts.length-1],o=parseInt(n.id)+1;t.id=o.toString(),console.log(t.id),e.addContact(t),e.vue.hideNewContactPane()},addContact:function(t){e.vue.contacts.push(t),e.vue.newContact={},e.vue.setEditMode(!1),e.vue.clearSearch(),e.vue.selectContact(t.id)},setDisplayGrid:function(){e.vue.isGridView=!0,e.vue.isListView=!1},setDisplayList:function(){e.vue.isGridView=!1,e.vue.isListView=!0},bindButtons:function(){console.log("binding buttons"),document.getElementById("add-contact").addEventListener("click",e.processContact),document.getElementById("set-view-list").addEventListener("click",e.setDisplayList),document.getElementById("set-view-grid").addEventListener("click",e.setDisplayGrid),document.getElementById("update-json-file").addEventListener("click",e.updateJsonFile),document.getElementById("reset-json-file").addEventListener("click",e.resetJsonFile)},init:function(){e.vue=new Vue({el:"#app",data:{contacts:[],message:"",displayMode:e.settings.displayMode,currentContact:{},isNewContactPaneVisible:!1,newContact:{},isListView:!0,isGridView:!1,isEditMode:!1},computed:{filteredContacts:function(){var e=this;return e.contacts.filter(function(t){var n=new RegExp(e.message,"i");return n.test(t.firstName)||n.test(t.lastName)})}},methods:{showNewContactPane:function(){e.vue.isNewContactPaneVisible=!0},hideNewContactPane:function(){e.vue.isNewContactPaneVisible=!1},selectContact:function(t){var n=e.vue.contacts.filter(function(e){return e.id===t})[0],o=JSON.parse(JSON.stringify(n));e.vue.currentContact=o},updateCurrentContact:function(){for(var t=e.vue.currentContact.id,n=0;n<e.vue.contacts.length;n++)if(e.vue.contacts[n].id==t){console.log("we found a match"),e.vue.contacts[n]=e.vue.currentContact,e.vue.contacts.push({}),e.vue.contacts.pop();break}e.vue.setEditMode(!1),e.vue.selectContact(e.vue.currentContact.id)},cancelContactUpdate:function(){e.vue.setEditMode(!1),e.vue.selectContact(e.vue.currentContact.id)},setEditMode:function(t){e.vue.isEditMode=t},clearSearch:function(){e.vue.message=""},resetPanels:function(){e.vue.currentContact={},e.vue.setEditMode(!1)},deleteCurrentContact:function(){e.vue.contacts=e.vue.contacts.filter(function(t){return t.id!==e.vue.currentContact.id}),e.vue.resetPanels()}}}),e.bindButtons(),e.loadContents(),e.vue.message=""}};return e.init(),window.expo=window.expo||e,e}();